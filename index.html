<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8">
<title>file</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@100..900&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Noto Sans Bengali', sans-serif;
    font-size: 18px;
    margin:4px;
    padding:4px;
    color:#111;
}
h2 { text-align:center; margin:8px; font-size:24px; font-weight:400; }
.print-btn, #saveJsonBtn, #loadJsonBtn, #addQuestion, #headingControl {
    display:inline-block;
    margin:4px;
}
.print-btn, #saveJsonBtn, #loadJsonBtn { padding:6px 10px; background:#0078d7; color:#fff; border:none; border-radius:3px; cursor:pointer; font-size:16px; }
@media print {
    .print-btn, #addQuestion, .delete-btn, #headingControl, #saveJsonBtn, #loadJsonBtn { display:none !important; }
}
.questions {
    column-count:2;
    column-gap:5px;
    margin:4px;
}
.question {
    margin-bottom:8px;
    page-break-inside: avoid;
    font-weight:400;
    position:relative;
}
.options {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:4px;
    margin-left:6px;
    font-weight:400;
}
.correct { color:darkblue; font-weight:600; }
.delete-btn {
    position:absolute;
    top:0;
    right:0;
    background:#e74c3c;
    color:#fff;
    border:none;
    border-radius:3px;
    padding:2px 6px;
    cursor:pointer;
    font-size:12px;
}
.footer { text-align:right; font-weight:700; margin-top:10px; }

/* Add Question Form */
#addQuestion {
    margin:10px 0;
    padding:10px;
    border:1px solid #ccc;
}
#addQuestion input, #addQuestion select { width:100%; margin:3px 0; padding:4px; }
#addQuestion label { font-weight:500; }
#addQuestion button { padding:6px 10px; margin-top:6px; cursor:pointer; }

/* Heading control */
#headingControl { margin:10px 0; padding:10px; border:1px solid #ccc; }
#headingControl input { width:100%; margin:3px 0; padding:4px; }
#headingControl button { padding:6px 10px; margin-top:6px; cursor:pointer; }
</style>
</head>
<body>

<!-- Heading Input Control -->
<div id="headingControl">
    <label>‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶π‡ßá‡¶°‡¶ø‡¶Ç:</label>
    <input type="text" id="headingInput" placeholder="‡¶π‡ßá‡¶°‡¶ø‡¶Ç ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" value="‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶™‡¶§‡ßç‡¶∞">
    <button onclick="updateHeading()">‡¶π‡ßá‡¶°‡¶ø‡¶Ç ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
</div>

<button class="print-btn" onclick="window.print()">üñ®Ô∏è Print</button>
<button id="saveJsonBtn">üíæ JSON ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
<input type="file" id="loadJsonBtn" accept=".json">

<h2 id="mainHeading">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶™‡¶§‡ßç‡¶∞</h2>

<!-- Add Question Form -->
<div id="addQuestion">
    <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶è‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
    <label>‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®:</label>
    <input type="text" id="manualText" placeholder="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
    <label>‡¶ï) ‡¶Ö‡¶™‡¶∂‡¶®:</label><input type="text" id="optA" required>
    <label>‡¶ñ) ‡¶Ö‡¶™‡¶∂‡¶®:</label><input type="text" id="optB" required>
    <label>‡¶ó) ‡¶Ö‡¶™‡¶∂‡¶®:</label><input type="text" id="optC" required>
    <label>‡¶ò) ‡¶Ö‡¶™‡¶∂‡¶®:</label><input type="text" id="optD" required>
    <label>‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞:</label>
    <select id="correctOpt">
        <option value="A">‡¶ï</option>
        <option value="B">‡¶ñ</option>
        <option value="C">‡¶ó</option>
        <option value="D">‡¶ò</option>
    </select>
    <button id="addBtn">‡¶è‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
</div>

<div class="questions" id="questions"></div>

<script>
// ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞
function toBengaliNum(num){
    const bn=['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'];
    return num.toString().split('').map(d=>bn[d]||d).join('');
}

// LocalStorage ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡ßã‡¶°
let questions = [];
window.addEventListener('load', () => {
    const savedQuestions = localStorage.getItem('questions');
    const savedHeading = localStorage.getItem('heading');
    if(savedQuestions) questions = JSON.parse(savedQuestions);
    if(savedHeading) {
        document.getElementById('mainHeading').innerText = savedHeading;
        document.getElementById('headingInput').value = savedHeading;
    }
    renderQuestions();
});

// Render questions
function renderQuestions(){
    const container = document.getElementById('questions');
    container.innerHTML='';
    questions.forEach((q,idx)=>{
        const div = document.createElement('div');
        div.className='question';
        const labels=['‡¶ï','‡¶ñ','‡¶ó','‡¶ò'];
        div.innerHTML=`${toBengaliNum(idx+1)}. ${q.text}
            <div class="options">
            ${q.option.map((opt,i)=>{
                return `<div class="${q.correct===['A','B','C','D'][i]?'correct':''}">${labels[i]}) ${opt}</div>`;
            }).join('')}
            </div>
            <button class="delete-btn" onclick="deleteQuestion(${idx})">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>`;
        container.appendChild(div);
    });
    localStorage.setItem('questions', JSON.stringify(questions));
}

// Delete question
function deleteQuestion(idx){
    if(confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶á ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')){
        questions.splice(idx,1);
        renderQuestions();
    }
}

// Add new question
document.getElementById('addBtn').addEventListener('click',()=>{
    const text = document.getElementById('manualText').value.trim();
    const optA = document.getElementById('optA').value.trim();
    const optB = document.getElementById('optB').value.trim();
    const optC = document.getElementById('optC').value.trim();
    const optD = document.getElementById('optD').value.trim();
    const correct = document.getElementById('correctOpt').value;
    if(!text || !optA || !optB || !optC || !optD){ alert('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®'); return; }
    questions.push({text:text, option:[optA,optB,optC,optD], correct:correct});
    renderQuestions();
    document.getElementById('manualText').value='';
    document.getElementById('optA').value='';
    document.getElementById('optB').value='';
    document.getElementById('optC').value='';
    document.getElementById('optD').value='';
});

// Update heading
function updateHeading(){
    const h = document.getElementById('headingInput').value.trim();
    if(h){
        document.getElementById('mainHeading').innerText = h;
        localStorage.setItem('heading', h);
    }
}

// Save JSON to file
document.getElementById('saveJsonBtn').addEventListener('click', ()=>{
    const dataStr = JSON.stringify({heading: document.getElementById('mainHeading').innerText, questions: questions}, null, 2);
    const blob = new Blob([dataStr], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = "questions.json";
    a.click();
    URL.revokeObjectURL(url);
});

// Load JSON file
document.getElementById('loadJsonBtn').addEventListener('change', (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(event){
        try{
            const data = JSON.parse(event.target.result);
            if(data.heading) document.getElementById('mainHeading').innerText = data.heading;
            if(data.questions) questions = data.questions;
            renderQuestions();
        }catch(err){
            alert("‡¶∏‡¶†‡¶ø‡¶ï JSON ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶Ø‡¶º");
        }
    }
    reader.readAsText(file);
});
</script>

</body>
</html>
