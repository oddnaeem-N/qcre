<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Sheet Builder</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: "Tiro Bangla", sans-serif;
      background: #fff;
      margin: 0;
      padding: 0;
      font-size: 28px !important; /* BIG FONT */
    }

    /* PRINT WRAPPER */
    .print-wrapper {
      padding-left: 2px;
      padding-right: 2px;
    }

    /* Print rules */
    @media print {
      @page { size: A4; margin: 0; }

      .app-header, .toolbar, .empty-state, footer {
        display: none !important;
      }

      .print-wrapper {
        padding-left: 2px;
        padding-right: 2px;
      }

      body { background: #fff; }
      .page-break { page-break-after: always; }
    }

    /* Title */
    .exam-title {
      text-align: center;
      font-weight: bold;
      font-size: 32px;
      margin-bottom: 4px;
    }

    /* Sections */
    .section-block {
      text-align: center;
      font-weight: bold;
      background: #e9ecef;
      padding: 4px;
      border: 1px solid #ccc;
      margin-top: 12px;
      margin-bottom: 6px;
    }

    /* Question Card */
    .question-card {
      border: 1px solid #000;
      padding: 0;
      margin-bottom: 10px;
      page-break-inside: avoid;
    }

    .question-header {
      font-weight: bold;
      padding: 6px;
      background: #f8f9fa;
      border-bottom: 1px solid #ddd;
    }

    /* Horizontal Options */
    .options-horizontal {
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      padding: 8px;
    }

    .option-item {
      display: flex;
      align-items: center;
      white-space: nowrap;
    }

    .answer-line {
      font-weight: bold;
      padding: 6px;
    }

    .explanation {
      padding: 6px;
      color: #444;
    }

  </style>
</head>

<body>

<div class="print-wrapper">

  <div id="examTitle" class="exam-title">[Enter Exam Name]</div>

  <div class="app-header d-flex justify-content-between align-items-center">
    <h1 class="h6 mb-0">Quiz Sheet Builder</h1>

    <div class="toolbar d-flex gap-1">
      <button id="setExamBtn" class="btn btn-info btn-sm">Set Exam Name</button>
      <button id="addBtn" class="btn btn-primary btn-sm">Add</button>
      <button id="printBtn" class="btn btn-secondary btn-sm">Print</button>
      <button id="clearBtn" class="btn btn-outline-danger btn-sm">Clear</button>
    </div>
  </div>

  <main class="container-fluid p-0">
    <div id="questionsRoot"></div>

    <div id="emptyState" class="empty-state">
      <p>No questions yet.</p>
      <button id="startAddBtn" class="btn btn-primary btn-sm">Add question</button>
    </div>
  </main>

  <footer class="container-fluid p-0">
    <p class="text-muted small text-center m-1">
      Horizontal options + big font enabled.
    </p>
  </footer>

</div>

<script>
  const STORE_KEY = "quizItems";
  const TITLE_KEY = "examTitle";
  let quizItems = [];

  const root = document.getElementById("questionsRoot");
  const empty = document.getElementById("emptyState");
  const examTitle = document.getElementById("examTitle");

  document.getElementById("addBtn").onclick = addPrompt;
  document.getElementById("startAddBtn").onclick = addPrompt;
  document.getElementById("printBtn").onclick = () => window.print();
  document.getElementById("clearBtn").onclick = clearAll;
  document.getElementById("setExamBtn").onclick = setExam;

  function load() {
    quizItems = JSON.parse(localStorage.getItem(STORE_KEY) || "[]");
    const saved = localStorage.getItem(TITLE_KEY);
    if (saved) examTitle.textContent = saved;
  }

  function save() {
    localStorage.setItem(STORE_KEY, JSON.stringify(quizItems));
  }

  function setExam() {
    const t = prompt("Enter Exam Name:");
    if (t) {
      examTitle.textContent = t;
      localStorage.setItem(TITLE_KEY, t);
    }
  }

  function clearAll() {
    if (confirm("Clear all?")) {
      quizItems = [];
      localStorage.removeItem(STORE_KEY);
      render();
    }
  }

  function addPrompt() {
    const section = prompt("Section:"); if (!section) return;
    const q = prompt("Question:"); if (!q) return;

    const o1 = prompt("Option 1:"); if (!o1) return;
    const o2 = prompt("Option 2:"); if (!o2) return;
    const o3 = prompt("Option 3:"); if (!o3) return;
    const o4 = prompt("Option 4:"); if (!o4) return;

    const correct = prompt("Correct option (1-4):");
    if (!["1","2","3","4"].includes(correct)) return;

    const exp = prompt("Explanation:") || "";

    quizItems.push({
      section,
      question: q,
      options: [o1, o2, o3, o4],
      correctIndex: Number(correct) - 1,
      explanation: exp
    });

    save();
    render();
  }

  function render() {
    root.innerHTML = "";

    if (quizItems.length === 0) {
      empty.style.display = "";
      return;
    }
    empty.style.display = "none";

    let lastSec = "";

    quizItems.forEach((item, i) => {

      if (item.section !== lastSec) {
        lastSec = item.section;
        const sec = document.createElement("div");
        sec.className = "section-block";
        sec.textContent = item.section;
        root.appendChild(sec);
      }

      const card = document.createElement("div");
      card.className = "question-card";

      const header = document.createElement("div");
      header.className = "question-header";
      header.textContent = `প্রশ্ন–${i + 1}`;
      card.appendChild(header);

      const q = document.createElement("div");
      q.style.padding = "8px";
      q.textContent = item.question;
      card.appendChild(q);

      const wrap = document.createElement("div");
      wrap.className = "options-horizontal";

      const labels = ["(ক)", "(খ)", "(গ)", "(ঘ)"];
      item.options.forEach((op, idx) => {
        const opt = document.createElement("div");
        opt.className = "option-item";
        opt.textContent = `${labels[idx]} ${op}`;
        wrap.appendChild(opt);
      });

      card.appendChild(wrap);

      const ans = document.createElement("div");
      ans.className = "answer-line";
      ans.textContent = `সঠিক উত্তর: ${labels[item.correctIndex]} ${item.options[item.correctIndex]}`;
      card.appendChild(ans);

      const ex = document.createElement("div");
      ex.className = "explanation";
      ex.textContent = `ব্যাখ্যা: ${item.explanation}`;
      card.appendChild(ex);

      root.appendChild(card);

      if ((i + 1) % 5 === 0) {
        const br = document.createElement("div");
        br.className = "page-break";
        root.appendChild(br);
      }
    });
  }

  load();
  render();
</script>

</body>
</html>
