<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grammar Rules</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0.2in;
    background-color: #f8f9fa;
    font-size: 36px; /* সব লেখা বড় */
  }

  h1 { 
    text-align: center; 
    margin-bottom: 0.2in; 
    font-size: 36px; 
  }

  .sheet {
    width: 100%;
    max-width: 8.27in; /* A4 width */
    min-height: 11.69in; /* A4 height */
    margin: 0 auto 0.2in auto;
    padding: 0.5in; 
    background-color: #fff;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }

  .rule-box {
    padding: 0.2in;
    background-color: #e9ecef;
    border-radius: 5px;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    margin-bottom: 0.2in;
    font-size: 36px;
  }

  .example-box {
    padding: 0.1in;
    margin: 0.05in 0;
    background-color: #fff;
    border-radius: 4px;
    font-size: 36px;
  }

  .wrong { color: red; }
  .correct { color: green; }
  .explanation { font-style: italic; margin-left: 0.1in; margin-bottom: 0.05in; font-size: 36px; }

  @media print {
    body { background-color: #fff; }
    .no-print { display: none !important; }
    .sheet { page-break-after: always; width: 100%; height: auto; margin: 0; padding: 0.5in; }
  }

  @media (max-width: 768px) {
    .sheet { padding: 0.2in; min-height: auto; }
    .rule-box { padding: 0.15in; }
    .example-box { padding: 0.08in; }
  }
</style>
</head>
<body>

<h1 class="no-print">Dynamic Common Noun Rules</h1>

<!-- Input section -->
<div class="mb-3 no-print">
  <input type="text" id="ruleTitle" class="form-control mb-1" placeholder="Rule Title">
  <textarea id="ruleText" class="form-control mb-1" placeholder="Rule Description"></textarea>
  <input type="text" id="wrongSentence" class="form-control mb-1" placeholder="Wrong Sentence">
  <input type="text" id="correctSentence" class="form-control mb-1" placeholder="Correct Sentence">
  <input type="text" id="explanationText" class="form-control mb-1" placeholder="Explanation">
  <button id="addRule" class="btn btn-primary">Add Rule</button>
  <button onclick="window.print()" class="btn btn-success mt-1">Print / PDF</button>
  <button id="clearData" class="btn btn-danger mt-1">Clear All Data</button>
</div>

<!-- Dynamic sheets -->
<div id="sheetsContainer"></div>

<script>
  let rules = JSON.parse(localStorage.getItem('commonNounRules')) || [];

  function renderRules() {
    const container = document.getElementById('sheetsContainer');
    container.innerHTML = '';
    rules.forEach(rule => {
      const sheet = document.createElement('div');
      sheet.className = 'sheet';
      const ruleBox = document.createElement('div');
      ruleBox.className = 'rule-box';
      ruleBox.innerHTML = `<h1>${rule.title}</h1><strong>Rule:</strong> ${rule.text}`;
      rule.examples.forEach(ex => {
        const exBox = document.createElement('div');
        exBox.className = 'example-box';
        exBox.innerHTML = `<span class="wrong">${ex.wrong}</span> → <span class="correct">${ex.correct}</span>
        <div class="explanation">${ex.explanation}</div>`;
        ruleBox.appendChild(exBox);
      });
      sheet.appendChild(ruleBox);
      container.appendChild(sheet);
    });
  }

  // Add new rule
  document.getElementById('addRule').addEventListener('click', () => {
    const title = document.getElementById('ruleTitle').value.trim();
    const text = document.getElementById('ruleText').value.trim();
    const wrong = document.getElementById('wrongSentence').value.trim();
    const correct = document.getElementById('correctSentence').value.trim();
    const explanation = document.getElementById('explanationText').value.trim();

    if (!title || !text || !wrong || !correct) {
      alert('Please fill all fields');
      return;
    }

    const newRule = { title, text, examples: [{ wrong, correct, explanation }] };
    rules.push(newRule);
    localStorage.setItem('commonNounRules', JSON.stringify(rules));

    // Clear input fields
    document.getElementById('ruleTitle').value = '';
    document.getElementById('ruleText').value = '';
    document.getElementById('wrongSentence').value = '';
    document.getElementById('correctSentence').value = '';
    document.getElementById('explanationText').value = '';

    renderRules();
  });

  // Clear all data with confirmation
  document.getElementById('clearData').addEventListener('click', () => {
    if (confirm('Are you sure you want to clear all saved rules? This action cannot be undone.')) {
      localStorage.removeItem('commonNounRules');
      rules = [];
      renderRules();
    }
  });

  // Initial render
  renderRules();
</script>

</body>
</html>
